{"version":3,"sources":["app.js"],"names":["inputField","document","querySelector","inputButton","inputError","appDiv","loader","countResults","getData","userLink","style","display","dataSource","fetch","ok","result","json","Error","shortenLink","short_link","showResult","err","console","log","showError","arr","split","generatedId","length","html","insertAdjacentHTML","classList","remove","resultDiv","copyResult","addEventListener","e","target","contains","innerHTML","btn","navigator","clipboard","writeText","add","setTimeout","message","useData","value","trim","blur","keyCode"],"mappings":";AAAA,aAEA,MAAMA,EAAaC,SAASC,cAAc,wBACpCC,EAAcF,SAASC,cAAc,sBACrCE,EAAaH,SAASC,cAAc,wBACpCG,EAASJ,SAASC,cAAc,QAEhCI,EAASL,SAASC,cAAc,WAEtC,IAAIK,EAAe,EAMnB,MAAMC,EAAU,eAAgBC,GAC1B,IACFH,EAAOI,MAAMC,QAAU,OACvBX,EAAWU,MAAMC,QAAU,OAC3BR,EAAYO,MAAMC,QAAU,OAEtBC,MAAAA,QAAmBC,8CACiBJ,KAG1CH,EAAOI,MAAMC,QAAU,OACvBX,EAAWU,MAAMC,QAAU,QAC3BR,EAAYO,MAAMC,QAAU,QAEtB,MAAA,GAAEG,EAAF,OAAMC,SAAiBH,EAAWI,OAEpC,IAACF,EAAI,MAAM,IAAIG,MAAM,qCAEnBC,MAAAA,EAAcH,EAAOI,WAC3BC,EAAWX,EAAUS,GACrBX,IACA,MAAOc,GACPC,QAAQC,IAAIF,GACZf,EAAOI,MAAMC,QAAU,OACvBX,EAAWU,MAAMC,QAAU,QAC3BR,EAAYO,MAAMC,QAAU,QAC5Ba,EAAU,yCAKRJ,EAAa,SAAUX,EAAUS,GAC/BO,MAAAA,EAAMP,EAAYQ,MAAM,OACxBC,EAAcF,EAAIA,EAAIG,OAAS,GAE/BC,6CAAkDF,oEAE5ClB,oEAEiCS,uFAI7Cb,EAAOyB,mBAAmB,YAAaD,GAEnCtB,EAAe,GACjBN,SACGC,sBAAsByB,OACtBI,UAAUC,OAAO,mBAGhBC,MAAAA,EAAYhC,SAASC,sBAAsByB,OACjDO,EAAWD,IAIPC,EAAa,SAAUD,GAC3BA,EAAUE,iBAAiB,QAAUC,IAC/BA,GAAAA,EAAEC,OAAON,UAAUO,SAAS,eAAgB,CACxCvB,MAAAA,EAASkB,EAAU/B,cAAc,iBAAiBqC,UAClDC,EAAMP,EAAU/B,cAAc,gBAGpCuC,UAAUC,UAAUC,UAAU5B,GAG9ByB,EAAID,UAAY,UAChBC,EAAIT,UAAUa,IAAI,cAElBC,WAAW,KACTL,EAAID,UAAY,OAChBC,EAAIT,UAAUC,OAAO,eACpB,SAKHR,EAAY,SAAUsB,GAC1B9C,EAAW+B,UAAUa,IAAI,cACzBxC,EAAW2B,UAAUC,OAAO,UAC5B5B,EAAWmC,UAAYO,GAGnBC,EAAU,WACkB,KAA5B/C,EAAWgD,MAAMC,QACnBzC,EAAQR,EAAWgD,MAAMC,QACzBjD,EAAWgD,MAAQ,GACnBhD,EAAWkD,QAEX1B,EAAU,sBAOdxB,EAAWmC,iBAAiB,QAAS,KACnCnC,EAAW+B,UAAUC,OAAO,cAC5B5B,EAAW2B,UAAUa,IAAI,YAG3B5C,EAAWmC,iBAAiB,UAAYC,IACpB,KAAdA,EAAEe,SACJJ,MAIJ5C,EAAYgC,iBAAiB,QAAS,KACpCY","file":"app.3e048aa9.js","sourceRoot":"..","sourcesContent":["\"use strict\";\r\n\r\nconst inputField = document.querySelector(\".link-shorten__field\");\r\nconst inputButton = document.querySelector(\".link-shorten__btn\");\r\nconst inputError = document.querySelector(\".link-shorten__error\");\r\nconst appDiv = document.querySelector(\".app\");\r\n\r\nconst loader = document.querySelector(\".loader\");\r\n\r\nlet countResults = 0;\r\n\r\n//////////////////////////////////////////////////////////////\r\n// FUNCTIONS\r\n\r\n// Get Data from API\r\nconst getData = async function (userLink) {\r\n  try {\r\n    loader.style.display = \"flex\";\r\n    inputField.style.display = \"none\";\r\n    inputButton.style.display = \"none\";\r\n\r\n    const dataSource = await fetch(\r\n      `https://api.shrtco.de/v2/shorten?url=${userLink}`\r\n    );\r\n\r\n    loader.style.display = \"none\";\r\n    inputField.style.display = \"block\";\r\n    inputButton.style.display = \"block\";\r\n\r\n    const { ok, result } = await dataSource.json();\r\n\r\n    if (!ok) throw new Error(\"An error occured please try again\");\r\n\r\n    const shortenLink = result.short_link;\r\n    showResult(userLink, shortenLink);\r\n    countResults++;\r\n  } catch (err) {\r\n    console.log(err);\r\n    loader.style.display = \"none\";\r\n    inputField.style.display = \"block\";\r\n    inputButton.style.display = \"block\";\r\n    showError(\"An error occured. Please try again!\");\r\n  }\r\n};\r\n\r\n// Show Result to UI\r\nconst showResult = function (userLink, shortenLink) {\r\n  const arr = shortenLink.split(/\\W/g);\r\n  const generatedId = arr[arr.length - 1];\r\n\r\n  const html = `<div class=\"result negative-margin\" id=\"${generatedId}\">\r\n          <h3 class=\"result__input heading-3\">\r\n            ${userLink}\r\n          </h3>\r\n          <h3 class=\"result__link heading-3\">${shortenLink}</h3>\r\n          <button class=\"result__btn btn-cyan\">Copy</button>\r\n        </div>`;\r\n\r\n  appDiv.insertAdjacentHTML(\"beforeend\", html);\r\n\r\n  if (countResults > 0) {\r\n    document\r\n      .querySelector(`[id=\"${generatedId}\"]`)\r\n      .classList.remove(\"negative-margin\");\r\n  }\r\n\r\n  const resultDiv = document.querySelector(`[id=\"${generatedId}\"]`);\r\n  copyResult(resultDiv);\r\n};\r\n\r\n// Copy result to Clipboard\r\nconst copyResult = function (resultDiv) {\r\n  resultDiv.addEventListener(\"click\", (e) => {\r\n    if (e.target.classList.contains(\"result__btn\")) {\r\n      const result = resultDiv.querySelector(\".result__link\").innerHTML;\r\n      const btn = resultDiv.querySelector(\".result__btn\");\r\n\r\n      //copy to clipboard\r\n      navigator.clipboard.writeText(result);\r\n\r\n      //change button style for 3 seconds\r\n      btn.innerHTML = \"Copied!\";\r\n      btn.classList.add(\"btn-violet\");\r\n\r\n      setTimeout(() => {\r\n        btn.innerHTML = \"Copy\";\r\n        btn.classList.remove(\"btn-violet\");\r\n      }, 3000);\r\n    }\r\n  });\r\n};\r\n\r\nconst showError = function (message) {\r\n  inputField.classList.add(\"errorField\");\r\n  inputError.classList.remove(\"hidden\");\r\n  inputError.innerHTML = message;\r\n};\r\n\r\nconst useData = function () {\r\n  if (inputField.value.trim() !== \"\") {\r\n    getData(inputField.value.trim());\r\n    inputField.value = \"\";\r\n    inputField.blur();\r\n  } else {\r\n    showError(\"Please add a link\");\r\n  }\r\n};\r\n\r\n//////////////////////////////////////////////////////////////\r\n// EVENT LISTENERS\r\n\r\ninputField.addEventListener(\"click\", () => {\r\n  inputField.classList.remove(\"errorField\");\r\n  inputError.classList.add(\"hidden\");\r\n});\r\n\r\ninputField.addEventListener(\"keydown\", (e) => {\r\n  if (e.keyCode === 13) {\r\n    useData();\r\n  }\r\n});\r\n\r\ninputButton.addEventListener(\"click\", () => {\r\n  useData();\r\n});\r\n"]}