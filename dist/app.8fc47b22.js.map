{"version":3,"sources":["app.js"],"names":["inputField","document","querySelector","inputButton","inputError","appDiv","loader","countResults","getData","userLink","fetch","style","display","dataSource","json","ok","result","Error","shortenLink","short_link","showResult","console","log","showError","arr","split","generatedId","length","html","insertAdjacentHTML","classList","remove","resultDiv","copyResult","addEventListener","e","target","contains","innerHTML","btn","navigator","clipboard","writeText","add","setTimeout","message","useData","value","trim","blur","keyCode"],"mappings":"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","file":"app.8fc47b22.js","sourceRoot":"..","sourcesContent":["\"use strict\";\r\n\r\nconst inputField = document.querySelector(\".link-shorten__field\");\r\nconst inputButton = document.querySelector(\".link-shorten__btn\");\r\nconst inputError = document.querySelector(\".link-shorten__error\");\r\nconst appDiv = document.querySelector(\".app\");\r\n\r\nconst loader = document.querySelector(\".loader\");\r\n\r\nlet countResults = 0;\r\n\r\n//////////////////////////////////////////////////////////////\r\n// FUNCTIONS\r\n\r\n// Get Data from API\r\nconst getData = async function (userLink) {\r\n  try {\r\n    loader.style.display = \"flex\";\r\n    inputField.style.display = \"none\";\r\n    inputButton.style.display = \"none\";\r\n\r\n    const dataSource = await fetch(\r\n      `https://api.shrtco.de/v2/shorten?url=${userLink}`\r\n    );\r\n\r\n    loader.style.display = \"none\";\r\n    inputField.style.display = \"block\";\r\n    inputButton.style.display = \"block\";\r\n\r\n    const { ok, result } = await dataSource.json();\r\n\r\n    if (!ok) throw new Error(\"An error occured please try again\");\r\n\r\n    const shortenLink = result.short_link;\r\n    showResult(userLink, shortenLink);\r\n    countResults++;\r\n  } catch (err) {\r\n    console.log(err);\r\n    loader.style.display = \"none\";\r\n    inputField.style.display = \"block\";\r\n    inputButton.style.display = \"block\";\r\n    showError(\"An error occured. Please try again!\");\r\n  }\r\n};\r\n\r\n// Show Result to UI\r\nconst showResult = function (userLink, shortenLink) {\r\n  const arr = shortenLink.split(/\\W/g);\r\n  const generatedId = arr[arr.length - 1];\r\n\r\n  const html = `<div class=\"result negative-margin\" id=\"${generatedId}\">\r\n          <h3 class=\"result__input heading-3\">\r\n            ${userLink}\r\n          </h3>\r\n          <h3 class=\"result__link heading-3\">${shortenLink}</h3>\r\n          <button class=\"result__btn btn-cyan\">Copy</button>\r\n        </div>`;\r\n\r\n  appDiv.insertAdjacentHTML(\"beforeend\", html);\r\n\r\n  if (countResults > 0) {\r\n    document\r\n      .querySelector(`[id=\"${generatedId}\"]`)\r\n      .classList.remove(\"negative-margin\");\r\n  }\r\n\r\n  const resultDiv = document.querySelector(`[id=\"${generatedId}\"]`);\r\n  copyResult(resultDiv);\r\n};\r\n\r\n// Copy result to Clipboard\r\nconst copyResult = function (resultDiv) {\r\n  resultDiv.addEventListener(\"click\", (e) => {\r\n    if (e.target.classList.contains(\"result__btn\")) {\r\n      const result = resultDiv.querySelector(\".result__link\").innerHTML;\r\n      const btn = resultDiv.querySelector(\".result__btn\");\r\n\r\n      //copy to clipboard\r\n      navigator.clipboard.writeText(result);\r\n\r\n      //change button style for 3 seconds\r\n      btn.innerHTML = \"Copied!\";\r\n      btn.classList.add(\"btn-violet\");\r\n\r\n      setTimeout(() => {\r\n        btn.innerHTML = \"Copy\";\r\n        btn.classList.remove(\"btn-violet\");\r\n      }, 3000);\r\n    }\r\n  });\r\n};\r\n\r\nconst showError = function (message) {\r\n  inputField.classList.add(\"errorField\");\r\n  inputError.classList.remove(\"hidden\");\r\n  inputError.innerHTML = message;\r\n};\r\n\r\nconst useData = function () {\r\n  if (inputField.value.trim() !== \"\") {\r\n    getData(inputField.value.trim());\r\n    inputField.value = \"\";\r\n    inputField.blur();\r\n  } else {\r\n    showError(\"Please add a link\");\r\n  }\r\n};\r\n\r\n//////////////////////////////////////////////////////////////\r\n// EVENT LISTENERS\r\n\r\ninputField.addEventListener(\"click\", () => {\r\n  inputField.classList.remove(\"errorField\");\r\n  inputError.classList.add(\"hidden\");\r\n});\r\n\r\ninputField.addEventListener(\"keydown\", (e) => {\r\n  if (e.keyCode === 13) {\r\n    useData();\r\n  }\r\n});\r\n\r\ninputButton.addEventListener(\"click\", () => {\r\n  useData();\r\n});\r\n"]}